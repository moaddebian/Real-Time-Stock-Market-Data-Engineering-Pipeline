# Configuration du projet Stock Market Kafka Pipeline

kafka:
  bootstrap_servers: "localhost:9092"
  topic_name: "stock_market_data"
  consumer_group_id: "stock_market_consumers"
  auto_offset_reset: "earliest"  # earliest, latest
  enable_auto_commit: true
  max_poll_records: 100

producer:
  send_interval: 1  # secondes entre chaque message
  max_messages: null  # null = infini, ou nombre pour limiter
  acks: "all"  # 0, 1, or "all"
  retries: 3
  batch_size: 16384
  linger_ms: 10

consumer:
  output_format: "parquet"  # json, parquet
  output_location: "s3://kafka-stock-market-data/stock_data"  # ou chemin local
  use_s3: false  # true pour S3, false pour local
  s3_bucket: "kafka-stock-market-tutorial-youtube-darshil"
  local_output_dir: "output"
  partition_by: ["date", "index"]  # Colonnes pour partitionnement S3
  batch_size: 100  # Nombre de messages avant écriture

data:
  csv_path: "indexProcessed.csv"
  date_column: "Date"
  index_column: "Index"
  price_columns: ["Open", "High", "Low", "Close", "Adj Close"]
  volume_column: "Volume"

analytics:
  enabled: true
  calculate_indicators: true
  indicators:
    - sma_20  # Simple Moving Average 20 jours
    - sma_50  # Simple Moving Average 50 jours
    - ema_12  # Exponential Moving Average 12 jours
    - rsi_14  # Relative Strength Index 14 jours
    - volatility  # Volatilité
  alert_thresholds:
    price_change_percent: 5.0  # Alerte si changement > 5%
    volume_spike_percent: 200.0  # Alerte si volume > 200% de la moyenne

api:
  enabled: true
  host: "0.0.0.0"
  port: 8000
  title: "Stock Market Kafka API"
  version: "1.0.0"

dashboard:
  enabled: true
  host: "0.0.0.0"
  port: 8501
  refresh_interval: 5  # secondes

logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR, CRITICAL
  format: "json"  # json, text
  file: "logs/pipeline.log"
  max_bytes: 10485760  # 10MB
  backup_count: 5

aws:
  region: "us-east-1"
  s3:
    use_glue: true
    glue_database: "stock_market_db"
    glue_table: "stock_market_table"

monitoring:
  enabled: true
  metrics_port: 9090
  health_check_enabled: true

